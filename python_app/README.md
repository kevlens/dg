# Python 版本的断轨基础数据工具

该目录包含原 WinForms 工具的 Python 迁移版本。最新实现基于 `tkinter` 提供与
WinForms 相似的图形界面，可完成数据库连接、区间与定标器浏览、数据修改及 SQL
脚本导出等功能。

## 运行环境

1. 安装 Python 3.10 及以上版本。
2. 安装依赖：

   ```bash
   pip install pyodbc
   ```

程序默认使用 **ODBC Driver 17 for SQL Server**。如目标服务器使用其他驱动，请按
需求调整 `python_app/app.py` 中的连接字符串。

## 启动方式

推荐使用 **PyCharm** 进行运行与调试，以便直接在界面中设置断点。操作步骤：

1. 使用 PyCharm 打开仓库根目录。
2. 在 "Run/Debug Configurations" 中新增一个 *Module name* 运行配置，模块填入
   `python_app.app`。
3. 选择合适的 Python 解释器（需已安装 `pyodbc`）。
4. 点击 **Run** 或 **Debug** 按钮即可启动 Tkinter 程序。

程序启动后会显示图形界面：

1. 在顶部输入服务器、数据库、用户名和密码，点击“连接”建立数据库连接。
2. 成功连接后左侧列出所有区间，选中区间即可查看详细信息并在右侧列出所属定标器。
3. 通过“更新区间信息”“更新定标器”“删除定标器”按钮可以记录修改或删除操作。
   修改时会弹出一个统一的编辑窗口，可一次性完成所有字段调整。
4. 所有操作会出现在界面下方的“已记录操作”列表中，列表会展示主键信息及修改
   内容，方便核对；点击“生成操作 SQL”即可导出与 WinForms 工具一致的 SQL 脚本，
   文件保存在当前目录的 `SQL/` 文件夹内。

关闭窗口会自动断开数据库连接并结束后台保活线程。
